<script src="https://apis.google.com/js/api.js"></script>
<script>
	var channels = [
		{
			title: "Every Day Television Client",
			async search(){
				return [{
					id: 1,
					title: "YouTube",
					subtitle: "Broadcast Yourself",
					image: "/static/youtube.png"
				}]
			},
			functionality(id){
				channel = id;
				document.getElementById("search").value = "";
				document.querySelector("search").setAttribute("collapsed", "true");
				updateContent();
			}
		},
		{
			api_key: "<%= locals.YT_API_KEY %>",
			title: "YouTube",
			async search(query){
				var url = `https://www.googleapis.com/youtube/v3/search?key=${api}&type=video&part=snippet&q=${query}&maxResults=25`;
				var res = await fetch(url).then((res) => res.json());
				var videos = [];
				for(var i = 0; i < res.items.length; i++){
					videos.push({
						id: res.items[i].id.videoId,
						title: res.items[i].snippet.title,
						subtitle: res.items[i].snippet.channelTitle,
						image: res.items[i].snippet.thumbnails.high.url
					});
				}
				return videos;
			},
			functionality(id){}
		}
	];
</script>